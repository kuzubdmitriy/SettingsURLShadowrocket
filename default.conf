# Shadowrocket Config
# WiFi -> Timeweb | Cellular -> лучший из подписки | TikTok+Claude -> my-IPv4

[General]
bypass-system = true
dns-server = 8.8.8.8, 1.1.1.1
skip-proxy = 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost

[Proxy Group]
# Подписка — автовыбор лучшего сервера по скорости
SubBest = url-test, policy-path=https://sub.vacvps.com/85AWKkoMCoxkx9fc, url=http://www.gstatic.com/generate_204, interval=600, timeout=3

# Timeweb — только для WiFi
WiFiProxy = select, policy-path=https://raw.githubusercontent.com/kuzubdmitriy/SettingsURLShadowrocket/main/servers.txt, policy-regex-filter=Timeweb

# my-IPv4 — для TikTok и Claude
TikTokClaude = select, policy-path=https://raw.githubusercontent.com/kuzubdmitriy/SettingsURLShadowrocket/main/servers.txt, policy-regex-filter=my-IPv4

# Главный прокси: WiFi -> Timeweb, Мобильные данные -> лучший из подписки
Main = ssid, default=WiFiProxy, cellular=SubBest

[Rule]
# === TikTok -> my-IPv4 (всегда) ===
DOMAIN-KEYWORD,tiktok,TikTokClaude
DOMAIN-SUFFIX,tiktok.com,TikTokClaude
DOMAIN-SUFFIX,m.tiktok.com,TikTokClaude
DOMAIN-SUFFIX,tiktok.net,TikTokClaude
DOMAIN-SUFFIX,livecenter.tiktok.com,TikTokClaude
DOMAIN-SUFFIX,live-backstage.tiktok.com,TikTokClaude
DOMAIN-SUFFIX,tiktokv.com,TikTokClaude
DOMAIN-SUFFIX,tiktokv.eu,TikTokClaude
DOMAIN-SUFFIX,tiktokcdn.com,TikTokClaude
DOMAIN,p16-webcast.tiktokcdn.com,TikTokClaude
DOMAIN-SUFFIX,tiktokcdn-us.com,TikTokClaude
DOMAIN-SUFFIX,tiktokcdn-eu.com,TikTokClaude
DOMAIN,p16-tiktokcdn-com.akamaized.net,TikTokClaude
DOMAIN-SUFFIX,muscdn.com,TikTokClaude
DOMAIN-SUFFIX,musical.ly,TikTokClaude
DOMAIN-SUFFIX,byteoversea.com,TikTokClaude
DOMAIN-SUFFIX,ibytedtos.com,TikTokClaude
DOMAIN-SUFFIX,ibyteimg.com,TikTokClaude
DOMAIN-SUFFIX,tiktokeu-cdn.com,TikTokClaude
DOMAIN-SUFFIX,tiktokrow-cdn.com,TikTokClaude

# === Claude (Anthropic) -> my-IPv4 (всегда) ===
DOMAIN-SUFFIX,anthropic.com,TikTokClaude
DOMAIN-SUFFIX,claude.ai,TikTokClaude
DOMAIN-KEYWORD,anthropic,TikTokClaude
DOMAIN-KEYWORD,claude,TikTokClaude

# === YouTube -> Main (WiFi=Timeweb / Cellular=SubBest) ===
DOMAIN-SUFFIX,youtube.com,Main
DOMAIN-SUFFIX,googlevideo.com,Main
DOMAIN-SUFFIX,ytimg.com,Main
DOMAIN-SUFFIX,youtu.be,Main

# === Instagram / Meta -> Main ===
DOMAIN-KEYWORD,instagram,Main
DOMAIN-SUFFIX,instagram.com,Main
DOMAIN-SUFFIX,cdninstagram.com,Main
DOMAIN-SUFFIX,instagr.am,Main
DOMAIN-SUFFIX,ig.me,Main
DOMAIN-SUFFIX,fb.com,Main
DOMAIN-SUFFIX,facebook.com,Main
DOMAIN-SUFFIX,facebook.net,Main
DOMAIN-SUFFIX,fbcdn.net,Main
DOMAIN-SUFFIX,meta.com,Main
DOMAIN-SUFFIX,whatsapp.com,Main
DOMAIN-SUFFIX,whatsapp.net,Main

# === Telegram -> Main ===
DOMAIN-SUFFIX,t.me,Main
DOMAIN-SUFFIX,tx.me,Main
DOMAIN-SUFFIX,tdesktop.com,Main
DOMAIN-SUFFIX,telegra.ph,Main
DOMAIN-SUFFIX,telega.one,Main
DOMAIN-SUFFIX,telesco.pe,Main
DOMAIN-SUFFIX,telegram.me,Main
DOMAIN-SUFFIX,telegram.org,Main
DOMAIN-SUFFIX,telegram.dog,Main
DOMAIN-SUFFIX,telegram.space,Main
DOMAIN-SUFFIX,telegram-cdn.org,Main
DOMAIN-SUFFIX,cdn-telegram.org,Main
DOMAIN-SUFFIX,fragment.com,Main
DOMAIN-SUFFIX,contest.com,Main
DOMAIN-SUFFIX,comments.app,Main
DOMAIN-SUFFIX,graph.org,Main
DOMAIN-SUFFIX,quiz.directory,Main
DOMAIN-SUFFIX,tg.dev,Main
DOMAIN-SUFFIX,usercontent.dev,Main
IP-CIDR,91.108.4.0/22,Main,no-resolve
IP-CIDR,91.108.8.0/22,Main,no-resolve
IP-CIDR,91.108.12.0/22,Main,no-resolve
IP-CIDR,91.108.16.0/22,Main,no-resolve
IP-CIDR,91.108.56.0/22,Main,no-resolve
IP-CIDR,109.239.140.0/24,Main,no-resolve
IP-CIDR,149.154.160.0/20,Main,no-resolve
IP-CIDR,2001:B28:F23D::/48,Main,no-resolve
IP-CIDR,2001:B28:F23F::/48,Main,no-resolve
IP-CIDR,2001:67C:4E8::/48,Main,no-resolve

# === Black Croc -> SubBest (всегда через подписку) ===
DOMAIN-KEYWORD,bcroc,SubBest
DOMAIN-KEYWORD,blackcroc,SubBest
DOMAIN-SUFFIX,bcroc.ru,SubBest
DOMAIN-SUFFIX,bcroc.online,SubBest
DOMAIN-SUFFIX,black-croc.ru,SubBest

# === Ростелеком Ключ -> Main ===
DOMAIN-SUFFIX,key.rt.ru,Main
DOMAIN-SUFFIX,household.key.rt.ru,Main
DOMAIN-SUFFIX,vc.key.rt.ru,Main
DOMAIN-SUFFIX,camera.rt.ru,Main
DOMAIN-SUFFIX,key-offer.rt.ru,Main

# ============================================================
# === Яндекс -> DIRECT ===
DOMAIN-KEYWORD,yandex,DIRECT
DOMAIN-SUFFIX,ya.ru,DIRECT
DOMAIN-SUFFIX,yandex.ru,DIRECT
DOMAIN-SUFFIX,yandex.net,DIRECT
DOMAIN-SUFFIX,yandex.com,DIRECT
DOMAIN-SUFFIX,yandex.kz,DIRECT
DOMAIN-SUFFIX,yandex.by,DIRECT
DOMAIN-SUFFIX,yandex.com.tr,DIRECT
DOMAIN-SUFFIX,yadi.sk,DIRECT
DOMAIN-SUFFIX,yastatic.net,DIRECT
DOMAIN-SUFFIX,yandexcloud.net,DIRECT
DOMAIN-SUFFIX,yandexcdn.net,DIRECT

# === MAX (Макс) -> DIRECT ===
DOMAIN-SUFFIX,max.ru,DIRECT
DOMAIN-SUFFIX,oneme.ru,DIRECT
DOMAIN-SUFFIX,oneme.app,DIRECT
DOMAIN-SUFFIX,sferum-dev.ru,DIRECT
DOMAIN-SUFFIX,sferum.ru,DIRECT

# === VK -> DIRECT ===
DOMAIN-SUFFIX,vk.com,DIRECT
DOMAIN-SUFFIX,vk.ru,DIRECT
DOMAIN-SUFFIX,vkontakte.ru,DIRECT
DOMAIN-SUFFIX,vk.me,DIRECT
DOMAIN-SUFFIX,userapi.com,DIRECT
DOMAIN-SUFFIX,mycdn.me,DIRECT
DOMAIN-SUFFIX,vkuseraudio.net,DIRECT
DOMAIN-SUFFIX,vkuservideo.net,DIRECT
DOMAIN-SUFFIX,vk-cdn.net,DIRECT
DOMAIN-SUFFIX,vk.company,DIRECT
# ============================================================

# === Avito -> DIRECT ===
DOMAIN-KEYWORD,avito,DIRECT
DOMAIN-SUFFIX,avito.ru,DIRECT
DOMAIN-SUFFIX,avito.st,DIRECT
DOMAIN-SUFFIX,avito.com,DIRECT
DOMAIN-SUFFIX,avito.kz,DIRECT

# === .kz -> Main ===
DOMAIN-SUFFIX,kz,Main

# === RU -> DIRECT ===
DOMAIN-SUFFIX,ru,DIRECT
DOMAIN-SUFFIX,su,DIRECT
DOMAIN-SUFFIX,xn--p1ai,DIRECT

# === RU -> DIRECT (по IP-гео) ===
GEOIP,RU,DIRECT

# === LAN -> DIRECT ===
IP-CIDR,192.168.0.0/16,DIRECT
IP-CIDR,10.0.0.0/8,DIRECT
IP-CIDR,172.16.0.0/12,DIRECT
IP-CIDR,127.0.0.0/8,DIRECT

# === ВСЁ ОСТАЛЬНОЕ -> Main ===
FINAL,Main
